{"version":3,"sources":["../src/util/caching.ts"],"names":[],"mappings":";;AAAA,MAAM,KAAK,GAAiC,EAAE,CAAA;AAEjC,QAAA,KAAK,GAAG;IACnB,GAAG;IACH,GAAG;IACH,SAAS;IACT,OAAO;CACR,CAAA;AAED,SAAS,GAAG,CAAE,IAAqB,EAAE,KAAU,EAAE,GAAW;IAC1D,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,CAAA;AACpC,CAAC;AAED,SAAS,GAAG,CAAE,IAAqB;IACjC,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,CAAA;IAExB,IAAI,IAAI,KAAK,SAAS,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE;QACxE,OAAO,CAAC,IAAI,CAAC,CAAA;QACb,OAAO,SAAS,CAAA;KACjB;IAED,OAAO,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AACtB,CAAC;AAED,SAAS,SAAS;IAChB,KAAK,MAAM,QAAQ,IAAI,KAAK,EAAE;QAC5B,MAAM,IAAI,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAA;QAC5B,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAA;QAEjC,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,EAAE;YACf,OAAM;SACP;QAED,IAAI,IAAI,IAAI,IAAI,CAAC,CAAC,EAAE;YAClB,OAAO,KAAK,CAAC,QAAQ,CAAC,CAAA;SACvB;KACF;AACH,CAAC;AAED,SAAS,OAAO,CAAE,IAAqB;IACrC,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,CAAA;IAExB,IAAI,CAAC,IAAI,EAAE;QACT,OAAM;KACP;IAED,OAAO,KAAK,CAAC,IAAI,CAAC,CAAA;AACpB,CAAC","file":"caching.js","sourcesContent":["const cache: { [key: string]: CacheItem } = {}\n\nexport const Cache = {\n  set,\n  get,\n  checkTTLs,\n  _delete\n}\n\nfunction set (name: string | number, value: any, ttl: number) {\n  cache[name] = { v: value, t: ttl }\n}\n\nfunction get (name: string | number): any {\n  const item = cache[name]\n\n  if (item === undefined || (item.t > 0 && new Date().getTime() >= item.t)) {\n    _delete(name)\n    return undefined\n  }\n\n  return cache[name].v\n}\n\nfunction checkTTLs () {\n  for (const itemName in cache) {\n    const item = cache[itemName]\n    const time = new Date().getTime()\n\n    if (item.t <= 0) {\n      return\n    }\n\n    if (time >= item.t) {\n      delete cache[itemName]\n    }\n  }\n}\n\nfunction _delete (name: string | number) {\n  const item = cache[name]\n\n  if (!item) {\n    return\n  }\n\n  delete cache[name]\n}\n\ntype CacheItem = {\n  v: any\n  t: number\n}\n"],"sourceRoot":"../../src"}